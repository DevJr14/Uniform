@page "/shopping/product-listing"
@attribute [AllowAnonymous]

<Header Title="Prodcut Listing" OnClose="Cancel" Description="Collections for both Primary and Secondary schools." />
<div class="d-flex flex-grow-1 flex-row mt-6">
    <MudHidden Breakpoint="Breakpoint.SmAndDown">
        <MudPaper Elevation="25" Class="pa-3 mr-6" MinWidth="250px">
            <MudButton EndIcon="@Icons.Material.Filled.Add" Color="Color.Secondary" FullWidth="true">Categories</MudButton>
            <CategoryList/>
        </MudPaper>
    </MudHidden>
    <MudPaper Elevation="25" Class="py-4 flex-grow-1">
        <MudToolBar Dense="true">
            <MudHidden Breakpoint="Breakpoint.MdAndUp">
                <MudIconButton OnClick="@(() => OpenDrawer(Anchor.Left))" Icon="@Icons.Material.Outlined.Menu" Color="Color.Inherit" Class="mr-2 ml-n2" />
            </MudHidden>
            <MudText Typo="Typo.h6" Color="Color.Primary" Inline="true" Class="mr-2">All</MudText>
            <MudText Typo="Typo.h6" Color="Color.Primary">Products</MudText>
            <MudSpacer />
        </MudToolBar>
        <div class="d-flex flex-column px-4" style="max-height:800px; overflow:scroll;">
            <ProductList />
        </div>
    </MudPaper>
</div>

<MudDrawer @bind-Open="@open" Anchor="@ChatDrawer" Elevation="1" Variant="@DrawerVariant.Temporary">
    @if (ChatDrawer == Anchor.Left)
    {
        <MudButton EndIcon="@Icons.Material.Filled.Add" Color="Color.Secondary" Class="mx-4 mt-6 mb-4">CATEGORIES</MudButton>
        <CategoryList/>
    }
</MudDrawer>

@code
{
    bool open;
    Anchor ChatDrawer { get; set; }

    private void Cancel()
    {
        _navigationManager.NavigateTo("/");
    }

    void OpenDrawer(Anchor anchor)
    {
        ChatDrawer = anchor;
        open = true;
    }
}